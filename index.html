<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shirley's Cyber-Grammar Nexus</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #050505;
            --bg-grid: #0f0f0f;
            --neon-blue: #00f3ff;
            --neon-purple: #bc13fe;
            --neon-gold: #ffd700;
            --neon-green: #0aff0a;
            --glass-panel: rgba(20, 20, 25, 0.7);
            --border-glow: rgba(0, 243, 255, 0.3);
            --text-main: #e0e0e0;
            --text-muted: #888;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-deep);
            background-image: 
                linear-gradient(rgba(0, 243, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            color: var(--text-main);
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* 背景光暈 */
        .ambient-glow {
            position: fixed;
            top: 50%; left: 50%;
            width: 100vw; height: 100vh;
            transform: translate(-50%, -50%);
            background: radial-gradient(circle at center, rgba(0, 243, 255, 0.05) 0%, transparent 70%);
            z-index: -1;
            pointer-events: none;
        }

        /* 頂部導航 */
        header {
            width: 100%;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-sizing: border-box;
            background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, transparent 100%);
            z-index: 100;
            border-bottom: 1px solid rgba(0, 243, 255, 0.1);
        }

        .back-btn {
            font-family: 'JetBrains Mono', monospace;
            text-decoration: none;
            color: var(--neon-blue);
            font-size: 0.9rem;
            padding: 0.5rem 1.2rem;
            border: 1px solid var(--neon-blue);
            background: rgba(0, 243, 255, 0.05);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
        }
        .back-btn:hover {
            background: var(--neon-blue);
            color: #000;
            box-shadow: 0 0 15px var(--neon-blue);
        }

        /* 主標題區 */
        .hero-section {
            text-align: center;
            margin-top: 20px;
            margin-bottom: 10px;
            z-index: 2;
        }

        h1 {
            font-family: 'Rajdhani', sans-serif;
            font-size: clamp(2.5rem, 6vw, 4rem);
            margin: 0;
            text-transform: uppercase;
            background: linear-gradient(90deg, #fff, var(--neon-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
            letter-spacing: 2px;
        }

        p.subtitle {
            font-family: 'JetBrains Mono', monospace;
            color: var(--neon-gold);
            font-size: 1rem;
            margin-top: 10px;
            opacity: 0.8;
            letter-spacing: 1px;
        }

        /* SVG 容器 */
        .svg-container {
            width: 100%;
            max-width: 1200px;
            height: auto;
            position: relative;
            z-index: 10;
            /* 讓 SVG 充滿容器 */
            display: flex;
            justify-content: center;
            padding-bottom: 50px;
        }

        svg {
            width: 100%;
            height: auto;
            max-height: 85vh;
            filter: drop-shadow(0 0 10px rgba(0,0,0,0.5));
            overflow: visible; /* 允許發光特效溢出 */
        }

        /* --- SVG 內部樣式 --- */

        /* 連接線纜 */
        .cable {
            fill: none;
            stroke-width: 2;
            opacity: 0.4;
            transition: all 0.5s ease;
        }
        .cable-glow {
            fill: none;
            stroke-width: 3;
            stroke-dasharray: 2000;
            stroke-dashoffset: 2000;
            animation: circuitFlow 3s linear infinite;
            filter: drop-shadow(0 0 5px currentColor);
            opacity: 0; /* 默認隱藏，hover 時顯示 */
            transition: opacity 0.3s;
        }

        .cable-group:hover .cable-glow {
            opacity: 1;
        }
        .cable-group:hover .cable {
            opacity: 0.8;
            stroke-width: 3;
        }

        @keyframes circuitFlow {
            to { stroke-dashoffset: 0; }
        }

        /* 核心能量柱 (Central Pillar) */
        .core-rect {
            fill: rgba(10, 10, 15, 0.9);
            stroke: var(--neon-gold);
            stroke-width: 2;
            transition: all 0.3s;
        }
        .core-group:hover .core-rect {
            fill: rgba(255, 215, 0, 0.1);
            filter: drop-shadow(0 0 15px var(--neon-gold));
        }
        .core-text {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 700;
            font-size: 18px;
            fill: #fff;
            text-anchor: middle;
            pointer-events: none;
            text-shadow: 0 0 5px rgba(0,0,0,1);
        }

        /* 紅色按鈕區 (Section Headers) */
        .section-header-rect {
            fill: rgba(50, 0, 20, 0.9);
            stroke: #ff0055;
            stroke-width: 2;
            cursor: pointer;
            transition: all 0.3s;
        }
        .section-header-group:hover .section-header-rect {
            fill: #ff0055;
            stroke: #fff;
            filter: drop-shadow(0 0 20px #ff0055);
        }
        .section-header-text {
            fill: #fff;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 700;
            font-size: 16px;
            text-anchor: middle;
            pointer-events: none;
        }

        /* 端口 (Ports) - 關鍵優化 */
        .port-group {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        /* 隱形點擊區，擴大點擊範圍 */
        .hit-area {
            fill: transparent; 
            stroke: none;
        }

        .port-circle-outer {
            fill: rgba(0,0,0,0.8);
            stroke: #555;
            stroke-width: 2;
            transition: all 0.3s;
        }
        .port-circle-inner {
            fill: #333;
            transition: all 0.3s;
        }
        .port-label {
            fill: #aaa;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            text-shadow: 0 1px 3px #000;
        }

        /* Port Hover Effects */
        .port-group:hover .port-circle-outer {
            stroke: var(--target-color);
            filter: drop-shadow(0 0 8px var(--target-color));
        }
        .port-group:hover .port-circle-inner {
            fill: var(--target-color);
            filter: drop-shadow(0 0 5px var(--target-color));
        }
        .port-group:hover .port-label {
            fill: #fff;
            font-weight: 700;
            transform: translateX(5px); /* 文字稍微移動產生動態感 */
        }

        /* Modal (Glassmorphism + Cyberpunk) */
        #modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0; top: 0;
            width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(8px);
            justify-content: center;
            align-items: center;
        }
        
        #modal-content {
            background: linear-gradient(135deg, rgba(20,20,25,0.95), rgba(10,10,15,0.98));
            border: 1px solid var(--neon-blue);
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.2);
            padding: 40px;
            width: 85%;
            max-width: 700px;
            border-radius: 4px; /* 硬邊角 */
            position: relative;
            clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
        }
        
        #close {
            color: var(--neon-blue);
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 32px;
            cursor: pointer;
            line-height: 0.8;
        }
        #close:hover { text-shadow: 0 0 10px var(--neon-blue); }
        
        .explanation-title {
            color: var(--neon-gold);
            border-bottom: 2px solid rgba(255, 215, 0, 0.3);
            padding-bottom: 15px;
            font-size: 24px;
            font-family: 'Rajdhani', sans-serif;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 0;
        }
        
        .explanation-text {
            line-height: 1.8;
            color: #d0d0d0;
            font-size: 1rem;
            margin-top: 20px;
            font-weight: 300;
        }

        .status-message {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid var(--neon-green);
            color: var(--neon-green);
            padding: 15px 30px;
            font-family: 'JetBrains Mono', monospace;
            z-index: 3000;
            font-size: 14px;
            box-shadow: 0 0 20px rgba(10, 255, 10, 0.2);
            display: none;
            text-transform: uppercase;
        }

        /* 手機版適配 */
        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .svg-container { margin-top: 0; }
            /* SVG 在手機上會自動縮放，因為我們沒有設固定寬度 */
        }
    </style>
</head>
<body>

    <div class="ambient-glow"></div>

    <header>
        <div style="font-family: 'Rajdhani'; font-weight:700; color:#fff; font-size:1.2rem;">GRAMMAR<span style="color:var(--neon-blue)">.SYS</span></div>
        <a href="https://ducj-creator.github.io/Teacher-Shirley/study-tools/index.html" class="back-btn">
            &lt; Return to Base
        </a>
    </header>

    <div class="hero-section">
        <h1>Grammar E-Charger</h1>
        <p class="subtitle">/// SYSTEM READY /// SELECT MODULE TO CHARGE ///</p>
    </div>

    <div class="svg-container">
        <svg viewBox="0 0 1200 750" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <linearGradient id="goldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#FFD700;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#B8860B;stop-opacity:1" />
                </linearGradient>
                <filter id="glow">
                    <feGaussianBlur stdDeviation="2.5" result="coloredBlur"/>
                    <feMerge>
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
            </defs>

            <path d="M 600 0 L 600 750" stroke="#222" stroke-width="10" />
            <path d="M 600 0 L 600 750" stroke="var(--neon-gold)" stroke-width="2" stroke-dasharray="10 20" opacity="0.5">
                <animate attributeName="stroke-dashoffset" from="0" to="300" dur="5s" repeatCount="indefinite" />
            </path>

            <g transform="translate(600, 100)">
                <rect x="-120" y="-40" width="240" height="60" fill="#111" stroke="var(--neon-gold)" stroke-width="2" rx="4" />
                <text x="0" y="0" fill="var(--neon-gold)" text-anchor="middle" font-family="Rajdhani" font-weight="700" font-size="24" dominant-baseline="middle" style="text-shadow: 0 0 10px var(--neon-gold);">SENTENCE STRUCTURES</text>
                
                <g class="core-group" onclick="handleLink('simple')">
                    <rect x="-100" y="50" width="200" height="50" class="core-rect" rx="4"/>
                    <text x="0" y="82" class="core-text">1. SIMPLE</text>
                </g>
                <line x1="0" y1="100" x2="0" y2="130" stroke="#444" stroke-width="2" />

                <g class="core-group" onclick="handleLink('compound')">
                    <rect x="-100" y="130" width="200" height="50" class="core-rect" rx="4"/>
                    <text x="0" y="162" class="core-text">2. COMPOUND</text>
                </g>
                <line x1="0" y1="180" x2="0" y2="210" stroke="#444" stroke-width="2" />

                <g class="core-group" onclick="handleLink('complex')">
                    <rect x="-100" y="210" width="200" height="50" class="core-rect" rx="4"/>
                    <text x="0" y="242" class="core-text">3. COMPLEX</text>
                </g>
                <line x1="0" y1="260" x2="0" y2="290" stroke="#444" stroke-width="2" />

                <g class="core-group" onclick="handleLink('compound-complex')">
                    <rect x="-100" y="290" width="200" height="50" class="core-rect" rx="4"/>
                    <text x="0" y="322" class="core-text">4. COMP-COMPLEX</text>
                </g>
            </g>

            <g class="cable-group">
                <path d="M 600 130 C 400 130, 400 150, 250 150" class="cable" stroke="var(--neon-blue)" />
                <path d="M 600 130 C 400 130, 400 150, 250 150" class="cable-glow" stroke="var(--neon-blue)" />
            </g>
            <g class="cable-group">
                <path d="M 600 370 C 400 370, 400 450, 250 450" class="cable" stroke="var(--neon-blue)" />
                <path d="M 600 370 C 400 370, 400 450, 250 450" class="cable-glow" stroke="var(--neon-blue)" />
            </g>

            <g transform="translate(250, 150)">
                <g class="section-header-group" onclick="showExplanation('parts-of-speech')">
                    <rect x="-80" y="-25" width="160" height="50" class="section-header-rect" rx="4"/>
                    <text x="0" y="0" class="section-header-text" dominant-baseline="middle">I. PARTS OF SPEECH</text>
                    <text x="0" y="15" fill="#aaa" font-size="10" text-anchor="middle">[ INFO ]</text>
                </g>

                <g class="port-group" onclick="handleLink('nouns')" style="--target-color: var(--neon-blue)">
                    <line x1="0" y1="25" x2="-120" y2="80" stroke="#333" stroke-width="2"/>
                    <circle cx="-120" cy="80" r="40" class="hit-area" /> <circle cx="-120" cy="80" r="10" class="port-circle-outer" />
                    <circle cx="-120" cy="80" r="5" class="port-circle-inner" />
                    <text x="-100" y="85" class="port-label">NOUNS</text>
                </g>

                <g class="port-group" onclick="handleLink('pronouns')" style="--target-color: var(--neon-blue)">
                    <line x1="0" y1="25" x2="-120" y2="130" stroke="#333" stroke-width="2"/>
                    <circle cx="-120" cy="130" r="40" class="hit-area" />
                    <circle cx="-120" cy="130" r="10" class="port-circle-outer" />
                    <circle cx="-120" cy="130" r="5" class="port-circle-inner" />
                    <text x="-100" y="135" class="port-label">PRONOUNS</text>
                </g>

                <g class="port-group" onclick="handleLink('verbs')" style="--target-color: var(--neon-blue)">
                    <line x1="0" y1="25" x2="0" y2="100" stroke="#333" stroke-width="2"/>
                    <circle cx="0" cy="100" r="40" class="hit-area" />
                    <circle cx="0" cy="100" r="10" class="port-circle-outer" />
                    <circle cx="0" cy="100" r="5" class="port-circle-inner" />
                    <text x="20" y="105" class="port-label">VERBS</text>
                </g>

                <g class="port-group" onclick="handleLink('adjectives-adverbs')" style="--target-color: var(--neon-blue)">
                    <line x1="0" y1="25" x2="120" y2="80" stroke="#333" stroke-width="2"/>
                    <circle cx="120" cy="80" r="40" class="hit-area" />
                    <circle cx="120" cy="80" r="10" class="port-circle-outer" />
                    <circle cx="120" cy="80" r="5" class="port-circle-inner" />
                    <text x="140" y="85" class="port-label">ADJ & ADV</text>
                </g>

                <g class="port-group" onclick="handleLink('prepositions')" style="--target-color: var(--neon-blue)">
                    <line x1="0" y1="25" x2="120" y2="130" stroke="#333" stroke-width="2"/>
                    <circle cx="120" cy="130" r="40" class="hit-area" />
                    <circle cx="120" cy="130" r="10" class="port-circle-outer" />
                    <circle cx="120" cy="130" r="5" class="port-circle-inner" />
                    <text x="140" y="135" class="port-label">PREPOSITIONS</text>
                </g>
            </g>

            <g transform="translate(250, 450)">
                <g class="section-header-group" onclick="showExplanation('nonfinite-verbs')">
                    <rect x="-80" y="-25" width="160" height="50" class="section-header-rect" rx="4"/>
                    <text x="0" y="0" class="section-header-text" dominant-baseline="middle">II. NON-FINITE</text>
                    <text x="0" y="15" fill="#aaa" font-size="10" text-anchor="middle">[ INFO ]</text>
                </g>

                <g class="port-group" onclick="handleLink('infinitive')" style="--target-color: var(--neon-purple)">
                    <line x1="0" y1="25" x2="-120" y2="80" stroke="#333" stroke-width="2"/>
                    <circle cx="-120" cy="80" r="40" class="hit-area" />
                    <circle cx="-120" cy="80" r="10" class="port-circle-outer" />
                    <circle cx="-120" cy="80" r="5" class="port-circle-inner" />
                    <text x="-100" y="85" class="port-label">INFINITIVE</text>
                </g>

                <g class="port-group" onclick="handleLink('gerund')" style="--target-color: var(--neon-purple)">
                    <line x1="0" y1="25" x2="-60" y2="130" stroke="#333" stroke-width="2"/>
                    <circle cx="-60" cy="130" r="40" class="hit-area" />
                    <circle cx="-60" cy="130" r="10" class="port-circle-outer" />
                    <circle cx="-60" cy="130" r="5" class="port-circle-inner" />
                    <text x="-40" y="135" class="port-label">GERUND</text>
                </g>

                <g class="port-group" onclick="handleLink('past-participle')" style="--target-color: var(--neon-purple)">
                    <line x1="0" y1="25" x2="60" y2="130" stroke="#333" stroke-width="2"/>
                    <circle cx="60" cy="130" r="40" class="hit-area" />
                    <circle cx="60" cy="130" r="10" class="port-circle-outer" />
                    <circle cx="60" cy="130" r="5" class="port-circle-inner" />
                    <text x="80" y="135" class="port-label">PAST PART.</text>
                </g>

                <g class="port-group" onclick="handleLink('present-participle')" style="--target-color: var(--neon-purple)">
                    <line x1="0" y1="25" x2="120" y2="80" stroke="#333" stroke-width="2"/>
                    <circle cx="120" cy="80" r="40" class="hit-area" />
                    <circle cx="120" cy="80" r="10" class="port-circle-outer" />
                    <circle cx="120" cy="80" r="5" class="port-circle-inner" />
                    <text x="140" y="85" class="port-label">PRES PART.</text>
                </g>
            </g>

            <g class="cable-group">
                <path d="M 600 130 C 800 130, 800 150, 950 150" class="cable" stroke="var(--neon-blue)" />
                <path d="M 600 130 C 800 130, 800 150, 950 150" class="cable-glow" stroke="var(--neon-blue)" />
            </g>
            <g class="cable-group">
                <path d="M 600 370 C 800 370, 800 450, 950 450" class="cable" stroke="var(--neon-blue)" />
                <path d="M 600 370 C 800 370, 800 450, 950 450" class="cable-glow" stroke="var(--neon-blue)" />
            </g>

            <g transform="translate(950, 150)">
                <g class="section-header-group" onclick="showExplanation('clauses')">
                    <rect x="-80" y="-25" width="160" height="50" class="section-header-rect" rx="4"/>
                    <text x="0" y="0" class="section-header-text" dominant-baseline="middle">III. CLAUSES</text>
                    <text x="0" y="15" fill="#aaa" font-size="10" text-anchor="middle">[ INFO ]</text>
                </g>

                <g class="port-group" onclick="handleLink('noun-clause')" style="--target-color: var(--neon-green)">
                    <line x1="0" y1="25" x2="-80" y2="80" stroke="#333" stroke-width="2"/>
                    <circle cx="-80" cy="80" r="40" class="hit-area" />
                    <circle cx="-80" cy="80" r="10" class="port-circle-outer" />
                    <circle cx="-80" cy="80" r="5" class="port-circle-inner" />
                    <text x="-180" y="85" class="port-label" text-anchor="end">NOUN CL.</text>
                </g>

                <g class="port-group" onclick="handleLink('adjective-clause')" style="--target-color: var(--neon-green)">
                    <line x1="0" y1="25" x2="0" y2="120" stroke="#333" stroke-width="2"/>
                    <circle cx="0" cy="120" r="40" class="hit-area" />
                    <circle cx="0" cy="120" r="10" class="port-circle-outer" />
                    <circle cx="0" cy="120" r="5" class="port-circle-inner" />
                    <text x="0" y="145" class="port-label" text-anchor="middle">ADJ CL.</text>
                </g>

                <g class="port-group" onclick="handleLink('adverb-clause')" style="--target-color: var(--neon-green)">
                    <line x1="0" y1="25" x2="80" y2="80" stroke="#333" stroke-width="2"/>
                    <circle cx="80" cy="80" r="40" class="hit-area" />
                    <circle cx="80" cy="80" r="10" class="port-circle-outer" />
                    <circle cx="80" cy="80" r="5" class="port-circle-inner" />
                    <text x="100" y="85" class="port-label" text-anchor="start">ADV CL.</text>
                </g>
            </g>

            <g transform="translate(950, 450)">
                <g class="section-header-group" onclick="showExplanation('special-sentences')">
                    <rect x="-80" y="-25" width="160" height="50" class="section-header-rect" rx="4"/>
                    <text x="0" y="0" class="section-header-text" dominant-baseline="middle">IV. SPECIAL</text>
                    <text x="0" y="15" fill="#aaa" font-size="10" text-anchor="middle">[ INFO ]</text>
                </g>

                <g class="port-group" onclick="handleLink('questions')" style="--target-color: #ff00ff">
                    <line x1="0" y1="25" x2="-100" y2="80" stroke="#333" stroke-width="2"/>
                    <circle cx="-100" cy="80" r="40" class="hit-area" />
                    <circle cx="-100" cy="80" r="10" class="port-circle-outer" />
                    <circle cx="-100" cy="80" r="5" class="port-circle-inner" />
                    <text x="-90" y="85" class="port-label" text-anchor="end" style="transform: translateX(-20px)">QUESTIONS</text>
                </g>

                <g class="port-group" onclick="handleLink('exclamations')" style="--target-color: #ff00ff">
                    <line x1="0" y1="25" x2="-40" y2="130" stroke="#333" stroke-width="2"/>
                    <circle cx="-40" cy="130" r="40" class="hit-area" />
                    <circle cx="-40" cy="130" r="10" class="port-circle-outer" />
                    <circle cx="-40" cy="130" r="5" class="port-circle-inner" />
                    <text x="-40" y="155" class="port-label" text-anchor="middle">EXCLAMATIONS</text>
                </g>

                <g class="port-group" onclick="handleLink('inverted')" style="--target-color: #ff00ff">
                    <line x1="0" y1="25" x2="40" y2="130" stroke="#333" stroke-width="2"/>
                    <circle cx="40" cy="130" r="40" class="hit-area" />
                    <circle cx="40" cy="130" r="10" class="port-circle-outer" />
                    <circle cx="40" cy="130" r="5" class="port-circle-inner" />
                    <text x="40" y="155" class="port-label" text-anchor="middle">INVERTED</text>
                </g>

                <g class="port-group" onclick="handleLink('subjunctive')" style="--target-color: #ff00ff">
                    <line x1="0" y1="25" x2="100" y2="80" stroke="#333" stroke-width="2"/>
                    <circle cx="100" cy="80" r="40" class="hit-area" />
                    <circle cx="100" cy="80" r="10" class="port-circle-outer" />
                    <circle cx="100" cy="80" r="5" class="port-circle-inner" />
                    <text x="120" y="85" class="port-label" text-anchor="start">SUBJUNCTIVE</text>
                </g>
            </g>
        </svg>
    </div>

    <div id="modal">
        <div id="modal-content">
            <span id="close">&times;</span>
            <h2 id="modal-title" class="explanation-title"></h2>
            <div id="modal-text" class="explanation-text"></div>
            <div style="margin-top:20px; font-size:0.8rem; color:#666; font-family:'JetBrains Mono'">[END OF TRANSMISSION]</div>
        </div>
    </div>

    <div id="status-message" class="status-message"></div>

    <script>
        // ----------------------------------------
        // 配置與資料
        // ----------------------------------------
        const grammarCSV = `no.,key point,url
S-1,simple,https://ducj-creator.github.io/Shirley-Grammar/simple/
S-2,compound,https://ducj-creator.github.io/Shirley-Grammar/compound/
S-3,complex,https://ducj-creator.github.io/Shirley-Grammar/complex/
S-4,compound-complex,https://ducj-creator.github.io/Shirley-Grammar/compound-complex/
P-1,nouns,https://ducj-creator.github.io/Shirley-Grammar/nouns/
P-2,pronouns,https://ducj-creator.github.io/Shirley-Grammar/pronouns/
P-3,adjectives-adverbs,https://ducj-creator.github.io/Shirley-Grammar/adjectives-adverbs/
P-4,verbs,https://ducj-creator.github.io/Shirley-Grammar/verbs/
P-5,prepositions,https://ducj-creator.github.io/Shirley-Grammar/prepositions/
V-1,infinitive,https://ducj-creator.github.io/Shirley-Grammar/infinitive/
V-2,gerund,https://ducj-creator.github.io/Shirley-Grammar/gerund/
V-3,present-participle,https://ducj-creator.github.io/Shirley-Grammar/present-participle/
V-4,past-participle,https://ducj-creator.github.io/Shirley-Grammar/past-participle/
C-1,noun-clause,https://ducj-creator.github.io/Shirley-Grammar/noun-clause/
C-2,adjective-clause,https://ducj-creator.github.io/Shirley-Grammar/adjective-clause/
C-3,adverb-clause,https://ducj-creator.github.io/Shirley-Grammar/adverb-clause/
SS-1,questions,https://ducj-creator.github.io/Shirley-Grammar/questions/
SS-2,exclamations,https://ducj-creator.github.io/Shirley-Grammar/exclamations/
SS-3,inverted,https://ducj-creator.github.io/Shirley-Grammar/inverted/
SS-4,subjunctive,https://ducj-creator.github.io/Shirley-Grammar/subjunctive/`;

        const sectionExplanations = {
            'parts-of-speech': {
                title: "I. Parts of Speech 詞性",
                text: "The eight parts of speech are the basic categories of words in English grammar. We focus on the core six here:<br><br><strong>• Nouns, Pronouns, Verbs, Adjectives, Adverbs, Prepositions</strong><br><br>Note: Conjunctions are covered in Compound Sentences.<br>英語的八大詞類是詞彙在文法上的基本類別。在此主要著重於前六類。"
            },
            'nonfinite-verbs': {
                title: "II. Non-finite Verbs 非限定動詞",
                text: "Non-finite verbs do not show tense, person, or number. They function as other parts of speech (nouns, adjectives, or adverbs).<br><br><strong>• Infinitive (不定詞)<br>• Gerund (動名詞)<br>• Participles (分詞)</strong>"
            },
            'clauses': {
                title: "III. Clauses 子句",
                text: "A clause contains a subject and a verb. Dependent clauses are classified by function:<br><br><strong>• Noun Clause (名詞子句)<br>• Adjective/Relative Clause (形容詞子句)<br>• Adverb Clause (副詞子句)</strong>"
            },
            'special-sentences': {
                title: "IV. Special Sentences 特殊句型",
                text: "Categories based on function or specific word arrangement:<br><br><strong>• Questions (疑問句)<br>• Exclamations (感嘆句)<br>• Inverted Sentences (倒裝句)<br>• Subjunctive Mood (虛擬語氣)</strong>"
            }
        };

        // ----------------------------------------
        // 邏輯處理
        // ----------------------------------------
        function parseCSV(csvText) {
            const lines = csvText.split('\n');
            const result = {};
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (line) {
                    const columns = line.split(',');
                    if (columns.length >= 3) {
                        result[columns[1].trim()] = columns[2].trim();
                    }
                }
            }
            return result;
        }

        const grammarLinks = parseCSV(grammarCSV);
        const statusEl = document.getElementById('status-message');
        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modal-title');
        const modalText = document.getElementById('modal-text');
        const closeBtn = document.getElementById('close');

        function showStatus(msg) {
            statusEl.textContent = `> ${msg}`;
            statusEl.style.display = 'block';
            // 簡單的打字機效果
            statusEl.style.animation = 'none';
            statusEl.offsetHeight; /* trigger reflow */
            statusEl.style.animation = 'fadeIn 0.2s';
            
            setTimeout(() => {
                statusEl.style.display = 'none';
            }, 2500);
        }

        function handleLink(key) {
            const lowerKey = key.toLowerCase();
            if (grammarLinks[lowerKey]) {
                showStatus(`CONNECTING TO DATALINK: [${key.toUpperCase()}]...`);
                setTimeout(() => {
                    window.open(grammarLinks[lowerKey], '_blank');
                }, 400);
            } else {
                showStatus(`ERROR: LINK NOT FOUND FOR [${key}]`);
            }
        }

        function showExplanation(key) {
            const exp = sectionExplanations[key];
            if (exp) {
                modalTitle.innerHTML = exp.title;
                modalText.innerHTML = exp.text;
                modal.style.display = 'flex';
                showStatus(`ACCESSING DATABASE: ${key.toUpperCase()}`);
            }
        }

        closeBtn.onclick = () => modal.style.display = 'none';
        window.onclick = (e) => {
            if (e.target == modal) modal.style.display = 'none';
        }

        // 初始化特效
        window.onload = () => {
            showStatus("SYSTEM ONLINE. WAITING FOR INPUT...");
        };

    </script>
</body>
</html>
