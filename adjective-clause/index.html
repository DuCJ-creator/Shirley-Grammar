收到！這就為您將「形容詞子句」的完整教材與測驗，搬遷到新的\*\*「放射狀思維導圖 (Radial Mind Map)」\*\*介面中。

這次我採用了\*\*「皇家紫水晶 (Royal Amethyst)」**配色（Purple & Gold），呼應您原檔的設計風格，並保留了**所有的\*\*文字講解、例句、語音功能以及 10 題測驗。

您可以直接儲存為 `adjective_clauses_radial.html`。

```html
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shirley's Adjective Clauses (Radial Design)</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,600;1,600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            /* 配色方案：Royal Amethyst (皇家紫水晶) - 保留您原檔的色調 */
            --bg-deep: #faf5ff;       /* 極淺紫背景 */
            --primary: #7e22ce;       /* 皇家紫 */
            --primary-dark: #2e1065;  /* 深邃靛紫 */
            --accent: #f59e0b;        /* 琥珀金 (強調色) */
            
            --card-bg: rgba(255, 255, 255, 0.98);
            --shadow-float: 0 10px 40px -10px rgba(46, 16, 101, 0.2);
            --highlight-bg: #f3e8ff;

            /* 測驗專用色 */
            --correct-bg: #dcfce7;
            --correct-text: #166534;
            --wrong-bg: #fee2e2;
            --wrong-text: #991b1b;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg-deep);
            color: #3b0764; /* 深紫黑文字 */
            overflow: hidden; 
            height: 100vh; width: 100vw;
        }

        /* --- 1. Radial Mind Map (放射狀首頁) --- */
        #mindmap-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            z-index: 1;
        }

        /* 中心節點 */
        .central-node {
            width: 190px; height: 190px;
            background: var(--primary-dark);
            border-radius: 50%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            color: white;
            box-shadow: 0 0 40px rgba(126, 34, 206, 0.5);
            z-index: 10;
            position: relative;
            animation: pulse 3s infinite ease-in-out;
            text-align: center;
            border: 4px solid #e9d5ff;
            cursor: default;
        }

        .central-title { font-family: 'Playfair Display', serif; font-size: 1.5rem; font-weight: 700; line-height: 1.2; }
        .central-sub { font-size: 0.8rem; opacity: 0.8; margin-top: 5px; font-weight: 300; letter-spacing: 1px; }

        /* 衛星節點 */
        .satellite {
            position: absolute;
            width: 120px; height: 120px;
            background: white;
            border: 2px solid var(--primary);
            border-radius: 50%;
            color: var(--primary-dark);
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-size: 0.9rem; font-weight: 600;
            z-index: 5;
            padding: 5px;
        }
        
        .satellite i { font-size: 1.6rem; margin-bottom: 5px; color: var(--primary); }
        .satellite span { font-size: 0.7rem; opacity: 0.7; display: block; margin-top: 3px; }

        .satellite:hover {
            transform: scale(1.15) !important;
            background: var(--primary);
            color: white;
            border-color: var(--primary-dark);
            box-shadow: 0 10px 25px rgba(126, 34, 206, 0.4);
            z-index: 20;
        }
        .satellite:hover i { color: white; }

        /* 測驗節點樣式 */
        .satellite.quiz-node { border-color: var(--accent); color: #b45309; }
        .satellite.quiz-node i { color: var(--accent); }
        .satellite.quiz-node:hover { background: var(--accent); color: white; border-color: #92400e; }
        .satellite.quiz-node:hover i { color: white; }

        /* 連接線 */
        .connections { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2; }
        .conn-line { stroke: var(--primary); stroke-width: 1.5; stroke-dasharray: 4,4; opacity: 0.3; }

        /* --- 2. Modal (內容卡片) --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(46, 16, 101, 0.3);
            backdrop-filter: blur(5px);
            z-index: 100;
            opacity: 0; visibility: hidden;
            transition: all 0.4s ease;
            display: flex; justify-content: center; align-items: center;
        }

        .modal-overlay.active { opacity: 1; visibility: visible; }

        .modal-card {
            width: 90%; max-width: 1000px; height: 90vh;
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: var(--shadow-float);
            display: flex; flex-direction: column;
            overflow: hidden;
            transform: translateY(30px) scale(0.95);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .modal-overlay.active .modal-card { transform: translateY(0) scale(1); }

        .modal-header {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            color: white;
            padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center;
            border-bottom: 3px solid var(--accent);
        }
        
        .modal-title h2 { font-family: 'Playfair Display', serif; font-size: 1.6rem; margin: 0; border: none; padding: 0; color: white; }
        .modal-close { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; transition: 0.3s; }
        .modal-close:hover { transform: rotate(90deg); color: var(--accent); }

        /* 分頁導航 */
        .modal-tabs {
            display: flex; background: #f3e8ff; overflow-x: auto;
            border-bottom: 1px solid #d8b4fe; flex-shrink: 0;
        }
        .tab-btn {
            flex: 1; padding: 1rem; border: none; background: none;
            color: var(--primary-dark); font-weight: 600; cursor: pointer;
            transition: 0.3s; min-width: 130px; white-space: nowrap;
            font-family: 'Noto Sans TC', sans-serif;
        }
        .tab-btn:hover { background: #e9d5ff; }
        .tab-btn.active { background: white; color: var(--primary); border-bottom: 3px solid var(--primary); }

        /* 內容樣式 (移植自您的原檔，保持一致性) */
        .modal-body { flex: 1; overflow-y: auto; padding: 2.5rem; scroll-behavior: smooth; line-height: 1.8; }
        
        h2 { font-family: 'Playfair Display', serif; color: var(--primary-dark); font-size: 1.8rem; border-bottom: 2px solid var(--accent); padding-bottom: 0.5rem; margin-bottom: 1.5rem; }
        h3 { color: var(--primary); font-size: 1.4rem; margin: 2rem 0 1rem 0; font-weight: 700; display: flex; align-items: center; }
        h3 i { margin-right: 10px; }
        h4 { color: #3b0764; font-size: 1.1rem; margin: 1.5rem 0 0.8rem 0; font-weight: 600; background-color: var(--highlight-bg); padding: 0.6rem 1rem; border-left: 4px solid var(--primary); border-radius: 0 4px 4px 0; }
        
        ul { list-style: none; padding-left: 0.5rem; }
        li { margin-bottom: 0.8rem; position: relative; padding-left: 0.5rem; }
        .structure { font-family: 'Courier New', monospace; background-color: #f3e8ff; padding: 4px 8px; border-radius: 4px; color: #6b21a8; font-weight: 700; font-size: 1.1em; display: inline-block; margin-bottom: 5px; border: 1px solid #d8b4fe; }

        /* 例句樣式 */
        .example-box { background-color: #faf5ff; border-left: 3px solid var(--accent); padding: 1rem 1.2rem; margin: 0.8rem 0 1.2rem 0; border-radius: 0 6px 6px 0; position: relative; transition: background-color 0.2s; }
        .example-box:hover { background-color: #f3e8ff; }
        
        .small-example { background-color: #fff; border: 1px solid #e9d5ff; border-left: 3px solid #d8b4fe; padding: 0.8rem; margin-top: 5px; border-radius: 0 4px 4px 0; position: relative; }
        .comparison-box { background-color: #fff; border: 1px solid #e2e8f0; border-left: 4px solid #f97316; padding: 1.2rem; margin: 1rem 0; border-radius: 6px; position: relative; }
        
        .en-sentence { font-weight: 600; color: #1e293b; font-size: 1.05rem; display: block; margin-bottom: 0.4rem; padding-right: 30px; }
        .ch-translation { color: #64748b; font-size: 0.95rem; }
        
        .speaker-btn { position: absolute; top: 1rem; right: 1rem; background: none; border: none; color: var(--primary); cursor: pointer; font-size: 1.1rem; opacity: 0.7; }
        .speaker-btn:hover { opacity: 1; transform: scale(1.1); color: var(--primary-dark); }
        .small-example .speaker-btn { top: 0.8rem; right: 0.5rem; }

        .note-box { background-color: #fffbeb; border: 1px solid #fcd34d; border-radius: 8px; padding: 1.2rem; margin: 1.5rem 0; color: #92400e; }
        .note-title { font-weight: bold; margin-bottom: 0.5rem; display: flex; align-items: center; }
        .kw { color: var(--primary); font-weight: bold; }

        /* Quiz Styles */
        .quiz-container { margin-top: 1rem; }
        .quiz-progress { margin-bottom: 1.5rem; color: #6b21a8; font-weight: 600; text-align: right; }
        .quiz-question { font-size: 1.2rem; font-weight: 600; margin-bottom: 1.5rem; line-height: 1.6; }
        .quiz-options { display: flex; flex-direction: column; gap: 10px; }
        
        .option-btn { padding: 1rem; border: 2px solid #e2e8f0; background: #fff; border-radius: 8px; text-align: left; cursor: pointer; font-size: 1rem; color: #3b0764; transition: 0.2s; font-family: inherit; }
        .option-btn:hover:not(:disabled) { border-color: var(--primary); background-color: #f3e8ff; }
        .option-btn.correct { background-color: var(--correct-bg); border-color: var(--correct-text); color: var(--correct-text); }
        .option-btn.wrong { background-color: var(--wrong-bg); border-color: var(--wrong-text); color: var(--wrong-text); }
        
        .feedback-area { margin-top: 1.5rem; padding: 1rem; border-radius: 8px; background-color: #f8fafc; border-left: 4px solid var(--accent); display: none; }
        .next-btn { margin-top: 1.5rem; background-color: var(--primary); color: white; border: none; padding: 0.8rem 2rem; border-radius: 30px; font-size: 1rem; cursor: pointer; display: none; }
        .score-card { text-align: center; padding: 2rem; display: none; }
        .final-score { font-size: 3rem; color: var(--primary); font-weight: 700; margin: 1rem 0; font-family: 'Playfair Display', serif; }

        @keyframes pulse { 0%, 100% { box-shadow: 0 0 40px rgba(126, 34, 206, 0.5); } 50% { box-shadow: 0 0 60px rgba(126, 34, 206, 0.8); } }
    </style>
</head>
<body>

    <div id="mindmap-container">
        <svg class="connections" id="lines-svg"></svg>
        
        <div class="central-node">
            <div class="central-title">Shirley's Adjective<br>Clauses</div>
            <div class="central-sub">形容詞子句</div>
        </div>

        <div class="satellite" onclick="openModal('intro')">
            <i class="fas fa-shapes"></i>
            <div>概論與代名詞<br><span>Intro</span></div>
        </div>
        <div class="satellite" onclick="openModal('adverbs')">
            <i class="fas fa-map-marker-alt"></i>
            <div>關係副詞<br><span>Adverbs</span></div>
        </div>
        <div class="satellite" onclick="openModal('commas')">
            <i class="fas fa-quote-left"></i>
            <div>限定 vs 非限定<br><span>Restrictive</span></div>
        </div>
        <div class="satellite" onclick="openModal('that-only')">
            <i class="fas fa-exclamation-circle"></i>
            <div>只能用 That<br><span>Special Case</span></div>
        </div>
        <div class="satellite" onclick="openModal('reduction')">
            <i class="fas fa-compress-arrows-alt"></i>
            <div>子句簡化<br><span>Reduction</span></div>
        </div>
        <div class="satellite quiz-node" onclick="openModal('quiz')">
            <i class="fas fa-pencil-alt"></i>
            <div>隨堂測驗<br><span>Quiz</span></div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-overlay">
        <div class="modal-card">
            <header class="modal-header">
                <div class="modal-title"><h2>Shirley's Adjective Clauses</h2></div>
                <button class="modal-close" onclick="closeModal()"><i class="fas fa-times"></i></button>
            </header>
            <nav class="modal-tabs" id="modal-tabs"></nav>
            <div class="modal-body" id="modal-content"></div>
        </div>
    </div>

    <script>
        // --- 1. CONTENT DATA (100% 原內容保留) ---
        const contentData = {
            intro: {
                title: "概論與代名詞",
                html: `
                <h2>I. 概論與關係代名詞</h2>
                <p><strong>形容詞子句</strong>（又稱關係子句），由關係代名詞 (who, whom, whose, which, that) 或關係副詞 (when, where, why) 所引導，用於修飾一個先前出現的名詞，又稱<strong>先行詞</strong>。</p>
                
                <h3>由關係代名詞引導</h3>
                
                <h4>1. who, whom, that (先行詞為人)</h4>
                
                <div class="example-box">
                    <span class="en-sentence">She is a teacher <span class="kw">who</span> teaches English writing.</span>
                    <span class="ch-translation">她是一位教英文寫作的老師。(who 作主詞，可用 that 代替，不可省略)</span>
                    <button class="speaker-btn" onclick="speakText('She is a teacher who teaches English writing')"><i class="fas fa-volume-up"></i></button>
                </div>
                
                <div class="example-box">
                    <span class="en-sentence">She is a teacher <span class="kw">whom</span> many of her students respect.</span>
                    <span class="ch-translation">她是一位許多學生都尊敬的老師。(whom 作受詞，可用 that 代替，也可省略)</span>
                    <button class="speaker-btn" onclick="speakText('She is a teacher whom many of her students respect')"><i class="fas fa-volume-up"></i></button>
                </div>

                <div class="example-box">
                    <span class="en-sentence">Young people <span class="kw">who</span> abuse their aged parents should be condemned.</span>
                    <span class="ch-translation">虐待年邁父母的年輕人應該受到譴責。</span>
                    <button class="speaker-btn" onclick="speakText('Young people who abuse their aged parents should be condemned')"><i class="fas fa-volume-up"></i></button>
                </div>

                <div class="example-box">
                    <span class="en-sentence">A patient to <span class="kw">whom</span> doctors tell white lies may enjoy a longer life.</span>
                    <span class="ch-translation">醫生對其說善意謊言的病人可能會活得更久。</span>
                    <button class="speaker-btn" onclick="speakText('A patient to whom doctors tell white lies may enjoy a longer life')"><i class="fas fa-volume-up"></i></button>
                </div>

                <h4>2. whose (所有格：... 的)</h4>
                
                <div class="example-box">
                    <span class="en-sentence">The students <span class="kw">whose</span> English grammar is weak will find English writing particularly challenging.</span>
                    <span class="ch-translation">英文文法較弱的學生會發現英文寫作特別具挑戰性。</span>
                    <button class="speaker-btn" onclick="speakText('The students whose English grammar is weak will find English writing particularly challenging')"><i class="fas fa-volume-up"></i></button>
                </div>

                <div class="example-box">
                    <span class="en-sentence">Her brother, <span class="kw">whose</span> hair is long, is a professional dancer.</span>
                    <span class="ch-translation">她的哥哥（留著長髮）是一位職業舞者。</span>
                    <button class="speaker-btn" onclick="speakText('Her brother, whose hair is long, is a professional dancer')"><i class="fas fa-volume-up"></i></button>
                </div>

                <div class="example-box">
                    <span class="en-sentence">The house <span class="kw">whose</span> roof is old belongs to the government.</span>
                    <span class="ch-translation">那間屋頂老舊的房子屬於政府。</span>
                    <button class="speaker-btn" onclick="speakText('The house whose roof is old belongs to the government')"><i class="fas fa-volume-up"></i></button>
                </div>

                <h4>3. which, that (先行詞為物)</h4>
                
                <div class="example-box">
                    <span class="en-sentence">I like the dress <span class="kw">that/which</span> my brother brought me.</span>
                    <span class="ch-translation">我喜歡我哥哥帶給我的那件洋裝。</span>
                    <button class="speaker-btn" onclick="speakText('I like the dress that my brother brought me')"><i class="fas fa-volume-up"></i></button>
                </div>

                <div class="example-box">
                    <span class="en-sentence">We live in Taiwan, <span class="kw">which</span> has a variety of delicious foods.</span>
                    <span class="ch-translation">我們住在台灣，這裡有各種美味的食物。</span>
                    <button class="speaker-btn" onclick="speakText('We live in Taiwan, which has a variety of delicious foods')"><i class="fas fa-volume-up"></i></button>
                </div>

                <div class="example-box">
                    <span class="en-sentence">I bought a new computer <span class="kw">that</span> is not very expensive.</span>
                    <span class="ch-translation">我買了一台不是很貴的新電腦。</span>
                    <button class="speaker-btn" onclick="speakText('I bought a new computer that is not very expensive')"><i class="fas fa-volume-up"></i></button>
                </div>`
            },
            adverbs: {
                title: "關係副詞",
                html: `
                <h2>II. 由關係副詞引導</h2>
                <p>用於修飾地點、時間、原因。</p>

                <h4>1. Where (修飾地點)</h4>
                <div class="example-box">
                    <span class="en-sentence">I come from New Zealand, a country <span class="kw">where</span> there are more sheep than people.</span>
                    <span class="ch-translation">我來自紐西蘭，一個羊比人多的國家。</span>
                    <button class="speaker-btn" onclick="speakText('I come from New Zealand, a country where there are more sheep than people')"><i class="fas fa-volume-up"></i></button>
                </div>
                <div class="example-box">
                    <span class="en-sentence">They had a meal at the bar <span class="kw">where</span> they met each other the first time two years ago.</span>
                    <span class="ch-translation">他們在兩年前第一次相遇的那家酒吧吃了飯。</span>
                    <button class="speaker-btn" onclick="speakText('They had a meal at the bar where they met each other the first time two years ago')"><i class="fas fa-volume-up"></i></button>
                </div>

                <h4>2. When (修飾時間)</h4>
                <div class="example-box">
                    <span class="en-sentence">I will never forget the day <span class="kw">when</span> I first arrived in Taipei.</span>
                    <span class="ch-translation">我永遠不會忘記我第一次到達台北的那一天。(when = that / on which)</span>
                    <button class="speaker-btn" onclick="speakText('I will never forget the day when I first arrived in Taipei')"><i class="fas fa-volume-up"></i></button>
                </div>
                <div class="example-box">
                    <span class="en-sentence">We haven't met each other since the year <span class="kw">when</span> we graduated from university.</span>
                    <span class="ch-translation">自從我們大學畢業那年以後，我們就沒見過面了。(when = that / in which)</span>
                    <button class="speaker-btn" onclick="speakText('We haven\'t met each other since the year when we graduated from university')"><i class="fas fa-volume-up"></i></button>
                </div>

                <h4>3. Why (修飾原因)</h4>
                <div class="example-box">
                    <span class="en-sentence">Being afraid of gaining weight is the main reason <span class="kw">why</span> the girl is on a diet.</span>
                    <span class="ch-translation">害怕體重增加是這個女孩節食的主要原因。(why = that / for which)</span>
                    <button class="speaker-btn" onclick="speakText('Being afraid of gaining weight is the main reason why the girl is on a diet')"><i class="fas fa-volume-up"></i></button>
                </div>`
            },
            commas: {
                title: "限定 vs 非限定",
                html: `
                <h2>III. 限定 vs 非限定用法</h2>
                
                <div class="comparison-box" style="border-left-color: var(--primary);">
                    <h3 style="margin-top:0;">1. 限定關係子句 (Restrictive)</h3>
                    <p>用來限定或修飾先行詞，前面通常<strong>不加逗號</strong>。含有句子的重要信息，拿掉後句子意義會不完整。</p>
                    
                    <div class="small-example">
                        <span class="en-sentence">I like the photo <span class="kw">that</span> you just posted on your FB.</span>
                        <span class="ch-translation">我喜歡你剛剛在 FB 發布的那張照片。</span>
                        <button class="speaker-btn" onclick="speakText('I like the photo that you just posted on your FB')"><i class="fas fa-volume-up"></i></button>
                    </div>
                    <div class="small-example">
                        <span class="en-sentence">The student <span class="kw">who</span> sits in the back of the room asks a lot of questions.</span>
                        <span class="ch-translation">坐在房間後面的那個學生問了很多問題。</span>
                        <button class="speaker-btn" onclick="speakText('The student who sits in the back of the room asks a lot of questions')"><i class="fas fa-volume-up"></i></button>
                    </div>
                    <div class="small-example">
                        <span class="en-sentence">Children <span class="kw">who</span> are addicted to computer games will feel isolated from the real world.</span>
                        <span class="ch-translation">沉迷於電腦遊戲的孩子會感到與現實世界隔絕。</span>
                        <button class="speaker-btn" onclick="speakText('Children who are addicted to computer games will feel isolated from the real world')"><i class="fas fa-volume-up"></i></button>
                    </div>
                    <div class="small-example">
                        <span class="en-sentence">People <span class="kw">who</span> like to cooperate with others usually have better interpersonal relationships.</span>
                        <span class="ch-translation">喜歡與他人合作的人通常有更好的人際關係。</span>
                        <button class="speaker-btn" onclick="speakText('People who like to cooperate with others usually have better interpersonal relationships')"><i class="fas fa-volume-up"></i></button>
                    </div>
                </div>

                <div class="comparison-box">
                    <h3 style="margin-top:0;">2. 非限定關係子句 (Non-restrictive)</h3>
                    <p>用來補充或附加說明先行詞，前面通常<strong>有逗號</strong>。關係代名詞<strong>不能是 that</strong>。拿掉後句子意義不會有重大改變。</p>
                    
                    <div class="small-example">
                        <span class="en-sentence">Their English teacher, <span class="kw">who</span> just came back from the US, is sharing with them his trip to the US.</span>
                        <span class="ch-translation">他們的英文老師（剛從美國回來）正在與他們分享他的美國之旅。</span>
                        <button class="speaker-btn" onclick="speakText('Their English teacher, who just came back from the US, is sharing with them his trip to the US')"><i class="fas fa-volume-up"></i></button>
                    </div>
                    <div class="small-example">
                        <span class="en-sentence">Jenny, <span class="kw">whose</span> mother is sick, has to ask for a leave from school.</span>
                        <span class="ch-translation">Jenny（她的母親生病了）必須向學校請假。</span>
                        <button class="speaker-btn" onclick="speakText('Jenny, whose mother is sick, has to ask for a leave from school')"><i class="fas fa-volume-up"></i></button>
                    </div>
                    <div class="small-example">
                        <span class="en-sentence">Minneapolis, <span class="kw">which</span> has a population of about 400,000, is the largest city in Minnesota.</span>
                        <span class="ch-translation">明尼亞波利斯（人口約 40 萬）是明尼蘇達州最大的城市。</span>
                        <button class="speaker-btn" onclick="speakText('Minneapolis, which has a population of about 400,000, is the largest city in Minnesota')"><i class="fas fa-volume-up"></i></button>
                    </div>
                    <div class="small-example">
                        <span class="en-sentence">Andy has two sisters, both of <span class="kw">whom</span> are doctors.</span>
                        <span class="ch-translation">Andy 有兩個姊姊，她們兩個都是醫生。</span>
                        <button class="speaker-btn" onclick="speakText('Andy has two sisters, both of whom are doctors')"><i class="fas fa-volume-up"></i></button>
                    </div>
                    <div class="small-example">
                        <span class="en-sentence">The baseball team, many of <span class="kw">whose</span> players come from southern Taiwan, won the championship.</span>
                        <span class="ch-translation">那支棒球隊（許多球員來自南台灣）贏得了冠軍。</span>
                        <button class="speaker-btn" onclick="speakText('The baseball team, many of whose players come from southern Taiwan, won the championship')"><i class="fas fa-volume-up"></i></button>
                    </div>
                </div>
                
                <div class="note-box" style="margin-top: 2rem;">
                    <div class="note-title"><i class="fas fa-star"></i> 進階重點：As vs Which (代表整句)</div>
                    <p><strong>as / which</strong> 可以引導非限定關係子句，代表前面「整個句子」。</p>
                    <div class="small-example">
                        <span class="en-sentence">He is very honest, <span class="kw">as/which</span> we can tell.</span>
                        <span class="ch-translation">他很誠實，這點我們看得出來。</span>
                        <button class="speaker-btn" onclick="speakText('He is very honest, as we can tell')"><i class="fas fa-volume-up"></i></button>
                    </div>
                    
                    <ul style="margin-top:10px; margin-left:10px;">
                        <li><strong>As</strong>：常有「正如，正像」的含義。位置靈活（句首、句中、句尾）。固定用法如：<em>as we can see, as is well known, as often happens</em>。</li>
                        <li><strong>Which</strong>：只能放在<strong>主句後</strong>。當主句和子句有明確「因果關係」時，只用 which。</li>
                    </ul>

                    <div class="small-example">
                        <span class="en-sentence"><span class="kw">As</span> is known to many people, the US is a developed country.</span>
                        <span class="ch-translation">正如許多人所知，美國是一個已開發國家。(As 在句首)</span>
                        <button class="speaker-btn" onclick="speakText('As is known to many people, the US is a developed country')"><i class="fas fa-volume-up"></i></button>
                    </div>
                    <div class="small-example">
                        <span class="en-sentence">The US, <span class="kw">as</span> is known to many people, is a developed country.</span>
                        <span class="ch-translation">(As 插在句中)</span>
                    </div>
                    
                    <div class="small-example">
                        <span class="en-sentence">Andy was late for school again and again, <span class="kw">which</span> made his teacher very angry.</span>
                        <span class="ch-translation">Andy 上學一再遲到，這件事讓他老師非常生氣。(因果關係，用 Which)</span>
                        <button class="speaker-btn" onclick="speakText('Andy was late for school again and again, which made his teacher very angry')"><i class="fas fa-volume-up"></i></button>
                    </div>
                    <div class="small-example">
                        <span class="en-sentence">These desks are made of marble, <span class="kw">which</span> made them very heavy.</span>
                        <span class="ch-translation">這些桌子是大理石做的，這使得它們非常重。</span>
                        <button class="speaker-btn" onclick="speakText('These desks are made of marble, which made them very heavy')"><i class="fas fa-volume-up"></i></button>
                    </div>
                </div>`
            },
            'that-only': {
                title: "只能用 That",
                html: `
                <h2>IV. 關係代名詞只能用 That 的情況</h2>
                <p>在以下情況中，為了避免混淆或慣用文法，我們傾向只使用 <strong>that</strong>。</p>

                <h4>1. 先行詞有最高級修飾</h4>
                <div class="example-box">
                    <span class="en-sentence">This is the <span class="kw">most interesting</span> book <span class="kw">that</span> I have ever read.</span>
                    <span class="ch-translation">這是我讀過最有趣的書。</span>
                    <button class="speaker-btn" onclick="speakText('This is the most interesting book that I have ever read')"><i class="fas fa-volume-up"></i></button>
                </div>

                <h4>2. 先行詞同時有人和物</h4>
                <div class="example-box">
                    <span class="en-sentence">I saw <span class="kw">Jenny and her dog</span> <span class="kw">that</span> were running in the park.</span>
                    <span class="ch-translation">我看到 Jenny 和她的狗在公園裡跑。</span>
                    <button class="speaker-btn" onclick="speakText('I saw Jenny and her dog that were running in the park')"><i class="fas fa-volume-up"></i></button>
                </div>

                <h4>3. 先行詞前有特定修飾語</h4>
                <p>如：first, last, next, only, very, every 等。</p>
                <div class="example-box">
                    <span class="en-sentence">Auckland is the <span class="kw">first</span> city <span class="kw">that</span> I lived in New Zealand.</span>
                    <span class="ch-translation">奧克蘭是我在紐西蘭居住的第一個城市。</span>
                    <button class="speaker-btn" onclick="speakText('Auckland is the first city that I lived in New Zealand')"><i class="fas fa-volume-up"></i></button>
                </div>

                <h4>4. 先行詞為不定代名詞時</h4>
                <p>如：something, anything, all 等。</p>
                <div class="example-box">
                    <span class="en-sentence">Is there <span class="kw">anything</span> <span class="kw">that</span> you want to say?</span>
                    <span class="ch-translation">你有什麼想說的嗎？</span>
                    <button class="speaker-btn" onclick="speakText('Is there anything that you want to say')"><i class="fas fa-volume-up"></i></button>
                </div>

                <h4>5. 避免混淆 (Who/Which 開頭的問句)</h4>
                <div class="example-box">
                    <span class="en-sentence"><span class="kw">Who</span> is the woman <span class="kw">that</span> just asked the question?</span>
                    <span class="ch-translation">剛剛問問題的那位女士是誰？(避免 Who is the woman who...)</span>
                    <button class="speaker-btn" onclick="speakText('Who is the woman that just asked the question')"><i class="fas fa-volume-up"></i></button>
                </div>
                <div class="example-box">
                    <span class="en-sentence"><span class="kw">Which</span> is the book <span class="kw">that</span> you recommend the most?</span>
                    <span class="ch-translation">哪一本是你最推薦的書？</span>
                    <button class="speaker-btn" onclick="speakText('Which is the book that you recommend the most')"><i class="fas fa-volume-up"></i></button>
                </div>`
            },
            reduction: {
                title: "子句簡化",
                html: `
                <h2>V. 形容詞子句簡化 (Reduction)</h2>
                <p>一些關係子句可以被縮略為非限定動詞片語（分詞片語），意思不變。</p>
                
                <h4>1. 主動語態 ➔ 現在分詞 (V-ing)</h4>
                <div class="example-box">
                    <p style="margin-bottom:5px; color:#666;">原句：</p>
                    <span class="en-sentence">The boy <span class="kw">who is sitting</span> at the back is my brother.</span>
                    <span class="ch-translation">坐在後面的那個男孩是我的弟弟。</span>
                </div>
                <div class="example-box" style="background-color:#f0fdf4; border-left-color:#16a34a;">
                    <p style="margin-bottom:5px; color:#166534;"><strong>簡化後：</strong></p>
                    <span class="en-sentence">The boy <span class="kw" style="color:#16a34a;">sitting</span> at the back is my brother.</span>
                    <button class="speaker-btn" onclick="speakText('The boy sitting at the back is my brother')"><i class="fas fa-volume-up"></i></button>
                </div>

                <div class="example-box">
                    <p style="margin-bottom:5px; color:#666;">原句：</p>
                    <span class="en-sentence">I am a teacher <span class="kw">who teaches</span> English at Chunghsin High School.</span>
                    <span class="ch-translation">我是一位在中興高中教英文的老師。</span>
                </div>
                <div class="example-box" style="background-color:#f0fdf4; border-left-color:#16a34a;">
                    <p style="margin-bottom:5px; color:#166534;"><strong>簡化後：</strong></p>
                    <span class="en-sentence">I am a teacher <span class="kw" style="color:#16a34a;">teaching</span> English at Chunghsin High School.</span>
                    <button class="speaker-btn" onclick="speakText('I am a teacher teaching English at Chunghsin High School')"><i class="fas fa-volume-up"></i></button>
                </div>

                <h4>2. 被動語態 ➔ 過去分詞 (V-pp)</h4>
                <div class="example-box">
                    <p style="margin-bottom:5px; color:#666;">原句：</p>
                    <span class="en-sentence">All the books <span class="kw">that were written</span> by the author are popular.</span>
                    <span class="ch-translation">這位作者寫的所有書都很受歡迎。</span>
                </div>
                <div class="example-box" style="background-color:#f0fdf4; border-left-color:#16a34a;">
                    <p style="margin-bottom:5px; color:#166534;"><strong>簡化後：</strong></p>
                    <span class="en-sentence">All the books <span class="kw" style="color:#16a34a;">written</span> by the author are popular.</span>
                    <button class="speaker-btn" onclick="speakText('All the books written by the author are popular')"><i class="fas fa-volume-up"></i></button>
                </div>`
            },
            quiz: {
                title: "隨堂測驗",
                html: `<div id="quiz-interface" class="quiz-container">
                    <div class="quiz-progress">Question <span id="current-question-num">1</span> of 10</div>
                    <div class="quiz-question" id="question-text"></div>
                    <div class="quiz-options" id="options-container"></div>
                    <div class="feedback-area" id="feedback-area">
                        <div class="feedback-title" id="feedback-title"></div>
                        <div id="feedback-text"></div>
                        <div style="margin-top:10px; font-size:0.9rem; color:#666;"><i class="fas fa-lightbulb" style="color:#eab308;"></i> 提示：<span id="feedback-hint"></span></div>
                    </div>
                    <button class="next-btn" id="next-btn" onclick="nextQuestion()">下一題 (Next)</button>
                </div>
                <div id="quiz-score" class="score-card" style="display: none;">
                    <h3><i class="fas fa-trophy"></i> 測驗完成！</h3>
                    <p>你的得分是：</p>
                    <div class="final-score"><span id="score-val">0</span> / 10</div>
                    <p id="score-msg"></p>
                    <button class="satellite" style="position:static; margin:20px auto; transform:none;" onclick="initQuiz()">再試一次 (Restart)</button>
                </div>`
            }
        };

        // --- 2. QUIZ DATA (100% 原內容保留) ---
        const quizData = [
            {
                q: "1. She is a teacher ______ teaches English writing.",
                options: ["whom", "who", "whose", "which"],
                correct: 1,
                rationale: "先行詞是人 (teacher)，且在子句中作主詞 (teaches)，故用 who。",
                hint: "這裡是問「誰」在教書，而且當主詞用。"
            },
            {
                q: "2. The students ______ English grammar is weak will find writing hard.",
                options: ["who", "whom", "whose", "that"],
                correct: 2,
                rationale: "表示「學生的」文法，具所有格關係，故用 whose。",
                hint: "這裡需要表達「他們的」文法很弱。"
            },
            {
                q: "3. I come from New Zealand, a country ______ there are more sheep than people.",
                options: ["which", "where", "that", "when"],
                correct: 1,
                rationale: "先行詞是地點 (country)，且在子句中作地方副詞，故用 where。",
                hint: "在那裡 (In that country) 有很多羊。"
            },
            {
                q: "4. This is the ______ interesting book that I have ever read.",
                options: ["more", "very", "most", "such"],
                correct: 2,
                rationale: "句尾用了 that，提示前面可能有最高級修飾 (the most interesting)。",
                hint: "最高級修飾語通常強制使用 that 作為關代。"
            },
            {
                q: "5. (非限定用法) The US, ______ is known to many people, is a developed country.",
                options: ["that", "which", "as", "what"],
                correct: 2,
                rationale: "As 引導的非限定關係子句可置於句中，意為「正如」。Which 通常置於句尾或緊跟先行詞。",
                hint: "這個字有「正如、正像」的意思，且位置很靈活。"
            },
            {
                q: "6. Andy was late again, ______ made his teacher angry.",
                options: ["that", "as", "which", "who"],
                correct: 2,
                rationale: "逗號後引導非限定子句，代表前面整件事造成了後果 (因果關係)，故用 which。",
                hint: "這件事導致了老師生氣 (因果關係)，且不能用 that。"
            },
            {
                q: "7. Who is the woman ______ just asked the question?",
                options: ["who", "which", "whom", "that"],
                correct: 3,
                rationale: "疑問詞 Who 開頭的問句，為了避免重複 (Who...who)，習慣用 that。",
                hint: "為了避免唸起來像 'Who... who...'，我們會改用哪個字？"
            },
            {
                q: "8. (簡化子句) The boy ______ at the back is my brother.",
                options: ["sit", "sitting", "sat", "is sitting"],
                correct: 1,
                rationale: "原句為 who is sitting，主動語態簡化為 V-ing (sitting)。",
                hint: "那個男孩是「主動」坐在那裡，簡化要用 ing。"
            },
            {
                q: "9. Being afraid of gaining weight is the main reason ______ she is on a diet.",
                options: ["which", "where", "why", "who"],
                correct: 2,
                rationale: "先行詞是 reason，搭配關係副詞 why。",
                hint: "Reason (理由) 搭配哪個疑問詞？"
            },
            {
                q: "10. This is the only student ______ passed the exam.",
                options: ["who", "which", "that", "whom"],
                correct: 2,
                rationale: "先行詞前有 the only 修飾，習慣上只用 that。",
                hint: "看到 'the only' 修飾時，優先選擇 that。"
            }
        ];

        // --- 3. SYSTEM LOGIC ---

        // 3.1 放射狀排列 (Radial Layout)
        function layoutSatellites() {
            const satellites = document.querySelectorAll('.satellite');
            const svg = document.getElementById('lines-svg');
            while (svg.firstChild) svg.removeChild(svg.firstChild);

            const radius = 230; // 半徑略大以容納內容
            const startAngle = -90; 
            const total = satellites.length;
            const cx = window.innerWidth / 2;
            const cy = window.innerHeight / 2;

            satellites.forEach((sat, i) => {
                const angle = startAngle + (i * (360 / total));
                const rad = angle * (Math.PI / 180);
                const x = Math.cos(rad) * radius;
                const y = Math.sin(rad) * radius;

                // 設定衛星位置
                sat.style.left = `calc(50% + ${x}px - 65px)`; // 65px is half width (120px + border)
                sat.style.top = `calc(50% + ${y}px - 65px)`;

                // 繪製連接線
                const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                line.setAttribute("x1", "50%");
                line.setAttribute("y1", "50%");
                line.setAttribute("x2", cx + x);
                line.setAttribute("y2", cy + y);
                line.classList.add("conn-line");
                svg.appendChild(line);
            });
        }
        
        window.addEventListener('resize', layoutSatellites);
        window.addEventListener('load', layoutSatellites);

        // 3.2 Modal 與 Tab 邏輯
        const tabKeys = ['intro', 'adverbs', 'commas', 'that-only', 'reduction', 'quiz'];

        function openModal(activeKey) {
            const modal = document.getElementById('modal-overlay');
            const tabsContainer = document.getElementById('modal-tabs');
            
            tabsContainer.innerHTML = tabKeys.map(key => {
                const isQuiz = key === 'quiz';
                return `<button class="tab-btn ${key === activeKey ? 'active' : ''}" 
                        onclick="switchTab('${key}', this)">
                        ${isQuiz ? '<i class="fas fa-pencil-alt"></i> ' : ''}${contentData[key].title}
                        </button>`;
            }).join('');

            loadContent(activeKey);
            modal.classList.add('active');
        }

        function closeModal() { document.getElementById('modal-overlay').classList.remove('active'); }

        function switchTab(key, btn) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            loadContent(key);
        }

        function loadContent(key) {
            const contentDiv = document.getElementById('modal-content');
            contentDiv.innerHTML = contentData[key].html;
            if(key === 'quiz') initQuiz();
        }

        // 3.3 語音合成邏輯 (Text-to-Speech)
        function speakText(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const u = new SpeechSynthesisUtterance(text);
                u.lang = 'en-US'; u.rate = 0.9;
                window.speechSynthesis.speak(u);
            }
        }

        // 3.4 測驗邏輯
        let currentQIndex = 0;
        let score = 0;
        let answered = false;

        function initQuiz() {
            currentQIndex = 0; score = 0;
            document.getElementById('quiz-interface').style.display = 'block';
            document.getElementById('quiz-score').style.display = 'none';
            loadQuestion();
        }

        function loadQuestion() {
            answered = false;
            const data = quizData[currentQIndex];
            document.getElementById('current-question-num').textContent = currentQIndex + 1;
            document.getElementById('question-text').innerText = data.q;
            
            const optionsDiv = document.getElementById('options-container');
            optionsDiv.innerHTML = '';
            document.getElementById('feedback-area').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';

            data.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt;
                btn.onclick = () => checkAnswer(index, btn);
                optionsDiv.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, btnElement) {
            if (answered) return;
            answered = true;
            const data = quizData[currentQIndex];
            const isCorrect = selectedIndex === data.correct;
            const options = document.getElementsByClassName('option-btn');
            const fbTitle = document.getElementById('feedback-title');

            if (isCorrect) {
                btnElement.classList.add('correct');
                score++;
                fbTitle.innerHTML = "<i class='fas fa-check'></i> 正確 (Correct)!";
                fbTitle.style.color = "var(--correct-text)";
                document.getElementById('feedback-area').style.borderLeftColor = "var(--correct-text)";
            } else {
                btnElement.classList.add('wrong');
                options[data.correct].classList.add('correct');
                fbTitle.innerHTML = "<i class='fas fa-times'></i> 錯誤 (Incorrect)";
                fbTitle.style.color = "var(--wrong-text)";
                document.getElementById('feedback-area').style.borderLeftColor = "var(--wrong-text)";
            }
            
            document.getElementById('feedback-text').innerText = data.rationale;
            document.getElementById('feedback-hint').innerText = data.hint;
            document.getElementById('feedback-area').style.display = 'block';

            for(let btn of options) btn.disabled = true;
            document.getElementById('next-btn').style.display = 'inline-block';
        }

        function nextQuestion() {
            currentQIndex++;
            if (currentQIndex < quizData.length) {
                loadQuestion();
            } else {
                showFinalScore();
            }
        }

        function showFinalScore() {
            document.getElementById('quiz-interface').style.display = 'none';
            document.getElementById('quiz-score').style.display = 'block';
            document.getElementById('score-val').textContent = score;
            const msg = document.getElementById('score-msg');
            
            if (score === 10) msg.textContent = "太完美了！完全掌握形容詞子句！🏆";
            else if (score >= 8) msg.textContent = "很棒！觀念非常清楚！👏";
            else if (score >= 5) msg.textContent = "還不錯，再複習一下非限定用法和簡化會更好！📚";
            else msg.textContent = "別灰心，重新閱讀講義，再挑戰一次吧！💪";
        }
    </script>
</body>
</html>
